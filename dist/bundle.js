!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.VMTWidget=e():t.VMTWidget=e()}("undefined"!=typeof self?self:this,function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=1)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.constants={CONTAINER_ID:"venue-mapping-tool",FRONT_POINT:"http://localhost:3000",IFRAME_NAME:"__VMT_TOOL__",messages:{missedParams:"VENUE MAPPING TOOL: missed one of the required arguments!",noContainer:function(t){return"VENUE MAPPING TOOL: There is no element with "+t+" id!"}},styles:{DEFAULT_IFRAME_HEIGHT:500,iframe:"width: 100%; height: 100%;",fullScreen:"position: fixed; padding: 0; margin: 0;\n             outline: none; border: none; top: 0;left: 0; width: 100%;",spinner:'\n                .vmt-loading {\n        position: absolute;\n        left: 0;\n        right: 0;\n        bottom: 0;\n        top: 0;\n        z-index: 99999;\n        background: rgba(255,255,255,0);\n    }\n    .vmt-spinner {\n        height:auto;\n        width:auto;\n        position: absolute;\n        top:50%;\n        left:50%;\n        margin: -30px 0 0 -30px;\n    }\n    .bounceball {\n        height: 105px;\n        width: 105px;\n        position: absolute;\n        top: 50%;\n        left: 50%;\n        margin: -75px 0 0 -60px;\n        -webkit-animation: rotation 1s infinite linear;\n        -moz-animation: rotation 1s infinite linear;\n        -o-animation: rotation 1s infinite linear;\n        animation: rotation 1s infinite linear;\n        border:6px solid rgba(115,194,69,.2);\n        border-radius:100%;\n    }\n\n    .bounceball:before {\n        content:"";\n        display:inline-block;\n        position:absolute;\n        left:-6px;\n        top:-6px;\n        height:100%;\n        width:100%;\n        border-top:6px solid rgba(115,194,69,.8);\n        border-left:6px solid transparent;\n        border-bottom:6px solid transparent;\n        border-right:6px solid transparent;\n        border-radius:100%;\n    }\n\n    @-webkit-keyframes rotation {\n        from {-webkit-transform: rotate(0deg);}\n        to {-webkit-transform: rotate(359deg);}\n    }\n    @-moz-keyframes rotation {\n        from {-moz-transform: rotate(0deg);}\n        to {-moz-transform: rotate(359deg);}\n    }\n    @-o-keyframes rotation {\n        from {-o-transform: rotate(0deg);}\n        to {-o-transform: rotate(359deg);}\n    }\n    @keyframes rotation {\n        from {transform: rotate(0deg);}\n        to {transform: rotate(359deg);}\n    }\n    .picture {\n        display: inline-block;\n        vertical-align: middle;\n        background-size: contain;\n        width: 100px;\n        height: 75px;\n        background-repeat:no-repeat;\n    }'}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=u(n(2)),i=n(0),s=u(n(3)),a=n(9);function u(t){return t&&t.__esModule?t:{default:t}}var c=new s.default,l=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return r(t,null,[{key:"launch",value:function(t){var e=this;if((0,a.iOSversion)())return alert("Your system is not supported. Please update your iOS version."),!1;if((0,a.isIE)())return alert("Your browser is not supported. Please use the latest version of Edge, Chrome, Mozilla, or Safari."),!1;var n=t.token,r=new o.default({containerId:t.containerId||i.constants.CONTAINER_ID,memberId:t.memberId,eventId:t&&t.eventId,venueId:t.venueId,frontPoint:t.frontPoint||i.constants.FRONT_POINT,mode:t&&t.mode,styles:t.styles,seatslimit:t.seatslimit,hideCloseBtn:t.hideCloseBtn,hideExpandBtn:t.hideExpandBtn,timeZone:t.timeZone});return c.launch(),c.method("vmtReady",function(){r.hideSpinner()}),c.method("closeWidget",function(){c.removeMethod("toggleFullScreen"),c.removeMethod("closeWidget"),r.close(c.destroyServer),e.onCloseFn()}),c.method("toggleFullScreen",function(){r.toggleFullScreen()}),c.method("getToken",function(){return n}),!0}},{key:"method",value:function(t,e){c.method(t,e)}},{key:"onClose",value:function(t){this.onCloseFn=t}}]),t}();e.default=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(0);var s=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var n=document.getElementById(e.containerId);this.isValidParams(e,n)&&this.initIframe(r({root:n},e))}return o(t,[{key:"close",value:function(t){var e=this.root.getElementsByTagName("iframe")[0];this.root.removeChild(e),t()}},{key:"toggleFullScreen",value:function(){var t=document.querySelector('iframe[name="'+i.constants.IFRAME_NAME+'"]');this.initialStyles?(t.style.cssText=this.initialStyles,this.initialStyles=null):""===this.initialStyles?(t.removeAttribute("style"),this.initialStyles=null):(this.initialStyles=t.style.cssText,t.style.cssText=i.constants.styles.fullScreen,t.height=90===window.orientation||-90===window.orientation?"100%":window.innerHeight)}},{key:"isValidParams",value:function(t,e){if(!t.memberId||!t.frontPoint||null===e){var n=null===e?i.constants.messages.noContainer(t.containerId):i.constants.messages.missedParams;return console.error(n),!1}return!0}},{key:"initIframe",value:function(t){var e=t.root;this.root=e,this.options=t;var n=document.createElement("iframe");n.name=i.constants.IFRAME_NAME,n.style.cssText=t.styles||i.constants.styles.iframe,n.frameBorder=0,n.src=this.getIframeUrl(t),this.showSpinner(),e.appendChild(n),n.focus()}},{key:"getIframeUrl",value:function(t){var e=t.frontPoint,n=t.memberId,r=t.eventId,o=t.venueId,i=t.mode,s=t.seatslimit,a=t.hideCloseBtn,u=t.hideExpandBtn,c=t.timeZone;return e+"?member="+n+(r?"&event="+r:"")+"&venue="+o+(i?"&mode="+i:"")+(s?"&seatslimit="+s:"")+(a?"&hideCloseBtn="+a:"")+(u?"&hideExpandBtn="+u:"")+(c?"&timeZone="+c:"")}},{key:"showSpinner",value:function(){var t=document.createElement("style");t.type="text/css",t.setAttribute("id","vmt-widget-spinner-styles"),t.innerHTML=i.constants.styles.spinner,document.getElementsByTagName("head")[0].appendChild(t);var e=document.createElement("div"),n=document.createElement("div"),r=document.createElement("div"),o=document.createElement("div");e.appendChild(n),e.appendChild(r),this.root.appendChild(e),this.root.appendChild(o),o.classList.add("vmt-loading"),e.classList.add("vmt-spinner"),n.classList.add("bounceball"),r.classList.add("picture")}},{key:"hideSpinner",value:function(){var t=document.getElementById("vmt-widget-spinner-styles");document.getElementsByTagName("head")[0].removeChild(t);var e=document.getElementById(this.options.containerId),n=e.getElementsByClassName("vmt-spinner")[0],r=e.getElementsByClassName("vmt-loading")[0];this.root.removeChild(r),this.root.removeChild(n)}}]),t}();e.default=s},function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){this.method=function(t,e){n[t]=e},this.removeMethod=function(t){delete n[t]},this.launch=function(){window.addEventListener("message",r)},this.destroyServer=function(){window.removeEventListener("message",r)}};var n={};function r(e){var r=void 0;if(e.originalEvent&&(e=e.originalEvent),e.data&&"string"==typeof e.data&&""!==e.data){try{r=JSON.parse(e.data)}catch(t){}if(r&&"2.0"===r.jsonrpc&&!r.error&&!r.result){if("function"!=typeof n[r.method])return i(e.source,-32601,"Method not found: "+r.method,r.id);if(r.method&&!Array.isArray(r.params))return i(e.source,-32700,"Invalid request",r.id);var o=n[r.method].apply(this,r.params);t.resolve(o).then(function(t){if(!e.source)return!1;r.id&&e.source.postMessage(JSON.stringify({jsonrpc:"2.0",result:t,id:r.id}),"*")}).catch(function(t){i(e.source,-32e3,t.message||"",r.id)})}}function i(t,e,n,r){var o=JSON.stringify({jsonrpc:"2.0",code:e,error:n,id:r||null});t&&t.postMessage(o,"*")}}}).call(e,n(4))},function(t,e,n){t.exports=n(5).Promise},function(t,e,n){(function(e,r){var o;o=function(){"use strict";function t(t){return"function"==typeof t}var o=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},i=0,s=void 0,a=void 0,u=function(t,e){p[i]=t,p[i+1]=e,2===(i+=2)&&(a?a(v):w())};var c="undefined"!=typeof window?window:void 0,l=c||{},f=l.MutationObserver||l.WebKitMutationObserver,d="undefined"==typeof self&&void 0!==e&&"[object process]"==={}.toString.call(e),h="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function m(){var t=setTimeout;return function(){return t(v,1)}}var p=new Array(1e3);function v(){for(var t=0;t<i;t+=2){(0,p[t])(p[t+1]),p[t]=void 0,p[t+1]=void 0}i=0}var y,g,b,_,w=void 0;function E(t,e){var n=arguments,r=this,o=new this.constructor(I);void 0===o[x]&&W(o);var i,s=r._state;return s?(i=n[s-1],u(function(){return z(s,o,i,r._result)})):L(r,o,t,e),o}function T(t){if(t&&"object"==typeof t&&t.constructor===this)return t;var e=new this(I);return k(e,t),e}d?w=function(){return e.nextTick(v)}:f?(g=0,b=new f(v),_=document.createTextNode(""),b.observe(_,{characterData:!0}),w=function(){_.data=g=++g%2}):h?((y=new MessageChannel).port1.onmessage=v,w=function(){return y.port2.postMessage(0)}):w=void 0===c?function(){try{var t=n(8);return s=t.runOnLoop||t.runOnContext,function(){s(v)}}catch(t){return m()}}():m();var x=Math.random().toString(36).substring(16);function I(){}var O=void 0,A=1,S=2,M=new R;function P(t){try{return t.then}catch(t){return M.error=t,M}}function C(e,n,r){n.constructor===e.constructor&&r===E&&n.constructor.resolve===T?function(t,e){e._state===A?N(t,e._result):e._state===S?B(t,e._result):L(e,void 0,function(e){return k(t,e)},function(e){return B(t,e)})}(e,n):r===M?B(e,M.error):void 0===r?N(e,n):t(r)?function(t,e,n){u(function(t){var r=!1,o=function(t,e,n,r){try{t.call(e,n,r)}catch(t){return t}}(n,e,function(n){r||(r=!0,e!==n?k(t,n):N(t,n))},function(e){r||(r=!0,B(t,e))},t._label);!r&&o&&(r=!0,B(t,o))},t)}(e,n,r):N(e,n)}function k(t,e){var n;t===e?B(t,new TypeError("You cannot resolve a promise with itself")):"function"==typeof(n=e)||"object"==typeof n&&null!==n?C(t,e,P(e)):N(t,e)}function j(t){t._onerror&&t._onerror(t._result),F(t)}function N(t,e){t._state===O&&(t._result=e,t._state=A,0!==t._subscribers.length&&u(F,t))}function B(t,e){t._state===O&&(t._state=S,t._result=e,u(j,t))}function L(t,e,n,r){var o=t._subscribers,i=o.length;t._onerror=null,o[i]=e,o[i+A]=n,o[i+S]=r,0===i&&t._state&&u(F,t)}function F(t){var e=t._subscribers,n=t._state;if(0!==e.length){for(var r=void 0,o=void 0,i=t._result,s=0;s<e.length;s+=3)r=e[s],o=e[s+n],r?z(n,r,o,i):o(i);t._subscribers.length=0}}function R(){this.error=null}var V=new R;function z(e,n,r,o){var i=t(r),s=void 0,a=void 0,u=void 0,c=void 0;if(i){if((s=function(t,e){try{return t(e)}catch(t){return V.error=t,V}}(r,o))===V?(c=!0,a=s.error,s=null):u=!0,n===s)return void B(n,new TypeError("A promises callback cannot return that same promise."))}else s=o,u=!0;n._state!==O||(i&&u?k(n,s):c?B(n,a):e===A?N(n,s):e===S&&B(n,s))}var U=0;function W(t){t[x]=U++,t._state=void 0,t._result=void 0,t._subscribers=[]}function Y(t,e){this._instanceConstructor=t,this.promise=new t(I),this.promise[x]||W(this.promise),o(e)?(this._input=e,this.length=e.length,this._remaining=e.length,this._result=new Array(this.length),0===this.length?N(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&N(this.promise,this._result))):B(this.promise,new Error("Array Methods must be provided an Array"))}function D(t){this[x]=U++,this._result=this._state=void 0,this._subscribers=[],I!==t&&("function"!=typeof t&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof D?function(t,e){try{e(function(e){k(t,e)},function(e){B(t,e)})}catch(e){B(t,e)}}(this,t):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}function H(){var t=void 0;if(void 0!==r)t=r;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var e=t.Promise;if(e){var n=null;try{n=Object.prototype.toString.call(e.resolve())}catch(t){}if("[object Promise]"===n&&!e.cast)return}t.Promise=D}return Y.prototype._enumerate=function(){for(var t=this.length,e=this._input,n=0;this._state===O&&n<t;n++)this._eachEntry(e[n],n)},Y.prototype._eachEntry=function(t,e){var n=this._instanceConstructor,r=n.resolve;if(r===T){var o=P(t);if(o===E&&t._state!==O)this._settledAt(t._state,e,t._result);else if("function"!=typeof o)this._remaining--,this._result[e]=t;else if(n===D){var i=new n(I);C(i,t,o),this._willSettleAt(i,e)}else this._willSettleAt(new n(function(e){return e(t)}),e)}else this._willSettleAt(r(t),e)},Y.prototype._settledAt=function(t,e,n){var r=this.promise;r._state===O&&(this._remaining--,t===S?B(r,n):this._result[e]=n),0===this._remaining&&N(r,this._result)},Y.prototype._willSettleAt=function(t,e){var n=this;L(t,void 0,function(t){return n._settledAt(A,e,t)},function(t){return n._settledAt(S,e,t)})},D.all=function(t){return new Y(this,t).promise},D.race=function(t){var e=this;return o(t)?new e(function(n,r){for(var o=t.length,i=0;i<o;i++)e.resolve(t[i]).then(n,r)}):new e(function(t,e){return e(new TypeError("You must pass an array to race."))})},D.resolve=T,D.reject=function(t){var e=new this(I);return B(e,t),e},D._setScheduler=function(t){a=t},D._setAsap=function(t){u=t},D._asap=u,D.prototype={constructor:D,then:E,catch:function(t){return this.then(null,t)}},H(),D.polyfill=H,D.Promise=D,D},t.exports=o()}).call(e,n(6),n(7))},function(t,e){var n,r,o=t.exports={};function i(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(t){if(n===setTimeout)return setTimeout(t,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:i}catch(t){n=i}try{r="function"==typeof clearTimeout?clearTimeout:s}catch(t){r=s}}();var u,c=[],l=!1,f=-1;function d(){l&&u&&(l=!1,u.length?c=u.concat(c):f=-1,c.length&&h())}function h(){if(!l){var t=a(d);l=!0;for(var e=c.length;e;){for(u=c,c=[];++f<e;)u&&u[f].run();f=-1,e=c.length}u=null,l=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function m(t,e){this.fun=t,this.array=e}function p(){}o.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];c.push(new m(t,e)),1!==c.length||l||a(h)},m.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=p,o.addListener=p,o.once=p,o.off=p,o.removeListener=p,o.removeAllListeners=p,o.emit=p,o.prependListener=p,o.prependOnceListener=p,o.listeners=function(t){return[]},o.binding=function(t){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(t){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e){},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isIE=function(){var t=navigator.userAgent;return t.indexOf("MSIE ")>-1||t.indexOf("Trident/")>-1},e.iOSversion=function(){if(/iP(hone|od|ad)/.test(navigator.platform)){var t=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);return!((t=[parseInt(t[1],10),parseInt(t[2],10),parseInt(t[3]||0,10)]).length&&t[0]>=11)}}}])});